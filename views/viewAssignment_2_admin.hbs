<!DOCTYPE html>

<meta name="viewport" content="width=device-width, initial-scale=1">
<html>
<head>
    <link rel = "stylesheet" href="/agent_ass_view.css" type="text/css" >
    <link rel = "stylesheet" href="/pager0.css" type="text/css" >
	<link rel = "stylesheet" href="/styles.css" type="text/css" >

    <title>Assignment No. {{this.ref_id}}</title>

    <script>
      function computer()
      {
        var value0 = 0;
        var value1 = 0;
        var value2 = 0;

        //COMPARATIVE 1
        var ref_date1 = parseInt(document.getElementById("ref_date_percent1").value);
        var property_type1 = parseInt(document.getElementById("property_type_percent1").value);
        var property_interest1 = parseInt(document.getElementById("property_interest_percent1").value);
        var size1 = parseInt(document.getElementById("lot_size_percent1").value);
        var shape1 = parseInt(document.getElementById("shape_percent1").value);
        var topo1 = parseInt(document.getElementById("topo_percent1").value);
        var frontage1 = parseInt(document.getElementById("frontage_percent1").value);
        var terms_of_sale1 = parseInt(document.getElementById("terms_of_sale_percent1").value);
        var corner1 = parseInt(document.getElementById("corner_percent1").value);
        var prime1 = parseInt(document.getElementById("prime_percent1").value);
        var hospital1 = parseInt(document.getElementById("hospital_percent1").value);
        var school1 = parseInt(document.getElementById("school_percent1").value);
        var mall1 = parseInt(document.getElementById("mall_percent1").value);
        var public_transpo1 = parseInt(document.getElementById("public_transpo_percent1").value);
        var improvement1 = parseInt(document.getElementById("improvement_percent1").value);
        var zoning1 = parseInt(document.getElementById("zoning_percent1").value);


        //mixed bools, 6 because there are 6 booleans
        // todo make this return the resultsofr bools
        //for (var i=0; i=6; i++)
        //{
        //}


        <!-- var corner_bool = document.getElementById("corner"); -->

        // todo: https://www.geeksforgeeks.org/how-to-add-a-parameter-to-the-url-in-javascript/
        // workaround - get the bool val of each and put them inside an array to be put in the url as part of req.param nalang
        // tapos get the backend to check the params
        var checked_items = document.getElementsByName("corner")
        // WORKING PATRT - checked_items[0].checked = true if naka check


                //[corner_bool[0].checked,
                  //	corner1.checked,
                  //	corner1.checked,
                  //	corner1.checked ]


        //var bools_percent = document.getElementById("bools_percent") // dont forget to parse to int when using

        var ref_date2 = parseInt(document.getElementById("ref_date_percent2").value);
        var property_type2 = parseInt(document.getElementById("property_type_percent2").value);
        var property_interest2 = parseInt(document.getElementById("property_interest_percent2").value);
        var size2 = parseInt(document.getElementById("lot_size_percent2").value);
        var shape2 = parseInt(document.getElementById("shape_percent2").value);
        var topo2 = parseInt(document.getElementById("topo_percent2").value);
        var frontage2 = parseInt(document.getElementById("frontage_percent2").value);
        var terms_of_sale2 = parseInt(document.getElementById("terms_of_sale_percent2").value);
        var corner2 = parseInt(document.getElementById("corner_percent2").value);
        var prime2 = parseInt(document.getElementById("prime_percent2").value);
        var hospital2 = parseInt(document.getElementById("hospital_percent2").value);
        var school2 = parseInt(document.getElementById("school_percent2").value);
        var mall2 = parseInt(document.getElementById("mall_percent2").value);
        var public_transpo2 = parseInt(document.getElementById("public_transpo_percent2").value);
        var improvement2 = parseInt(document.getElementById("improvement_percent2").value);
        var zoning2 = parseInt(document.getElementById("zoning_percent2").value);


        var startingValue0 = parseInt(document.getElementById("price_per_sqm").value);
        var startingValue1 = parseInt(document.getElementById("price_per_sqm1").value);
        var startingValue2 = parseInt(document.getElementById("price_per_sqm2").value);

        value1 = startingValue1 + (startingValue1*ref_date1*0.01) +
        (startingValue1*property_type1*0.01)+
        (startingValue1*property_interest1*0.01)+
        (startingValue1*size1*0.01) +
        (startingValue1*shape1*0.01) +
        (startingValue1*topo1*0.01) +
        (startingValue1*frontage1*0.01) +
        (startingValue1*terms_of_sale1*0.01) +
        (startingValue1*corner1*0.01) +
        (startingValue1*prime1*0.01) +
        (startingValue1*hospital1*0.01) +
        (startingValue1*school1*0.01) +
        (startingValue1*mall1*0.01)+
        (startingValue1*improvement1*0.01)+
        (startingValue1*public_transpo1*0.01) +
        (startingValue1*zoning1*0.01);


        value2 = startingValue2 + (startingValue2*ref_date2*0.01) +
        (startingValue2*property_type2*0.01)+
        (startingValue2*property_interest2*0.01)+
        (startingValue2*size2*0.01) +
        (startingValue2*shape2*0.01) +
        (startingValue2*topo2*0.01) +
        (startingValue2*frontage2*0.01) +
        (startingValue2*terms_of_sale2*0.01) +
        (startingValue2*corner2*0.01) +
        (startingValue2*prime2*0.01) +
        (startingValue2*hospital2*0.01) +
        (startingValue2*school2*0.01) +
        (startingValue2*mall2*0.01)+
        (startingValue2*public_transpo2*0.01) +
        (startingValue2*zoning2*0.01);


        var comp_percent1 = parseInt(document.getElementById("computation_percent1").value);
        var comp_percent2 = parseInt(document.getElementById("computation_percent2").value);

        var computationText = document.getElementById("computation");

        <!-- computationText.value = parseInt(startingValue0.value)+423;	//WORKS NOW -->


  //			computationText.value = value0;	//WORKS NOW
        var computationText1 = document.getElementById("computation1");
        computationText1.value = checked_items.length;
        var computationText2 = document.getElementById("computation2");
        computationText2.value = value2;

        //computationText.value = parseInt(computationText1.value)*(comp_percent1*0.01)
        computationText.value = (parseInt(computationText1.value)*(comp_percent1*0.01)) + (parseInt(computationText2.value)*(comp_percent2*0.01))


        var zonal_value = parseInt(document.getElementById("zonal").value);



        //not working zonal value
        if (parseInt(computationText1.value)*(comp_percent1*0.01) + parseInt(computationText2.value)*(comp_percent2*0.01) > zonal_value)//does not work -> this.zonal)
        {
          computationText.value = (parseInt(computationText1.value)*(comp_percent1*0.01)) + (parseInt(computationText2.value)*(comp_percent2*0.01))
        }
        else {
          computationText.value = zonal_value
        }


        //computationText.value = bools;
        <!-- computationText1.value = startValue2; -->
        <!-- computationText2.setAttribute("value", "Hi") -->

      }

    </script>

    <script>




      //prevent unsaved stuff
          window.addEventListener('beforeunload', function (e) {


        <!-- document.getElementById("property_type_percent1"); -->
        <!-- document.getElementById("property_interest_percent1"); -->
        <!-- document.getElementById("lot_size_percent1"); -->
        <!-- document.getElementById("shape_percent1"); -->
        <!-- document.getElementById("topo_percent1"); -->
        <!-- document.getElementById("frontage_percent1"); -->
        <!-- document.getElementById("terms_of_sale_percent1"); -->
        <!-- document.getElementById("corner_percent1"); -->
        <!-- document.getElementById("prime_percent1"); -->
        <!-- document.getElementById("hospital_percent1"); -->
        <!-- document.getElementById("school_percent1"); -->
        <!-- document.getElementById("mall_percent1"); -->
        <!-- document.getElementById("public_transpo1"); -->
        <!-- document.getElementById("zoning_percent1"); -->



              // TODO complete this
              <!-- if (document.getElementById("property_type_percent2") !== 0 || -->
                  <!-- document.getElementById("property_interest_percent2") !== '' || -->
          <!-- document.getElementById("lot_size_percent2") !== '' || -->
          <!-- document.getElementById("shape_percent2") !== '' || -->
          <!-- document.getElementById("topo_percent2") !== '' || -->
          <!-- document.getElementById("frontage_percent2") !== '' || -->
          <!-- document.getElementById("terms_of_sale_percent2") !== '' || -->
          <!-- document.getElementById("corner_percent2") !== '' || -->
          <!-- document.getElementById("prime_percent2") !== '' || -->
          <!-- document.getElementById("hospital_percent2") !== '' || -->
          <!-- document.getElementById("school_percent2") !== '' || -->
          <!-- document.getElementById("mall_percent2") !== '' || -->
          <!-- document.getElementById("public_transpo2") !== '' || -->
          <!-- document.getElementById("zoning_percent2")  !== '') { -->

                  // Cancel the event and
                  // show alert that the unsaved
                  // changes would be lost
                  e.preventDefault();
                  e.returnValue = '';
              }

    </script>


      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap" rel="stylesheet">

  </head>
  <body>
      <div class="container">
          <div id="sidebar">
              <div class="sidebar-profile">
                  <img src="/temp_pic.png" width="100" height="100">
                  <div class="sidebar-profile-text">
                      <p class="sidebar-profile-name">{{this.username}}</p>
                      <p class="sidebar-profile-email"><i>{{this.email}}</i></p>
                      <a href="/logout">Log Out</a>
                  </div>
              </div>

              <div class="sidebar-profile-btn">

                  <a href="/dashboard">Profile</a>
              </div>
              <div class="sidebar-assignments-btn">

                  <a  href="/assignments">Assignments</a>
              </div>
              <div class="sidebar-history-btn">
                        <a  href="/admin-add-agent">Add New Agent</a>
              </div>
              <div class="sidebar-history-btn">

                  <a  href="/history">History</a>
              </div>
              <div class="sidebar-settings-btn">

                  <a href="/profile">Settings</a>
              </div>

              <div class="bottom-button">

                  <a href="/logout">Logout</a>
              </div>
          </div>

      <div class="openbtn" >
        <a href="#" onclick="openNav()">☰</a>
      </div>

          <div class="main">
              <div class="main-header">
                  <h1>Editing Assignment #{{ref_id}}</p>
                  <p><b><i>Items will NOT be autosaved!</b></i></p>
                  <p>Please be mindful before you close the page. This assignment will be hidden until you save or navigate back to Assignments.</p>
              </div>

              <form class="assignments-form">
                  <div class="main-table">

					<table>
						<tr>
							<th></th>
							<th>ADMIN</th>
							<th>PANEL</th>
							<th></th>
						</tr>
                        <tr>	<!-- ref_id & creation date -->
                            <th><label for="ref_id">Reference ID</label></th>
                            <td><input name="ref_id" type="number" value="{{this.ref_id}}" readonly></td>
								<!-- type_of_approach & assigned appraiser -->
                            <th><label for="type_of_approach">Type of Approach</label></th>
							<td><input name="type_of_approach" type="text" value="{{this.type_of_approach}}" readonly></td>
                        </tr>

						<tr>	<!-- client_name -->
                            <th><label for="client_name">Client First Name</label></th>
                            <td><input name="client_name" type="text" value="{{this.client_f_name}}"></td>

                            <th><label for="client_name">Client Last Name</label></th>
                            <td><input name="client_name" type="text" value="{{this.client_l_name}}"></td>

                        </tr>

					    <tr>	<!-- Contact Info -->
							<th><label for="client_email">Client Esaamail</label></th>
							<td><input name="client_email" id="client_email" type="text" value="{{this.client_email}}"></td>

                            <th><label for="client_contact_num">Client Contact Number</label></th>
                            <td><input name="client_contact_num" id="client_contact_num" type="text" value="{{this.client_contact_num}}"></td>
                        </tr>

						<tr>	<!-- lot_brgy,city,region - will serve as general location for interest check of agents/appraisers & zonal value-->
							<th><label for="gen_lot_loc">Lot Baranggay</label></th>
							<td><input name="gen_lot_loc" type="text" value="{{this.lot_brgy}}"></td>

							<th><label for="gen_lot_loc">Lot City</label></th>
							<td><input name="gen_lot_loc" type="text" value="{{this.lot_city}}"></td>
						</tr>

						<tr>
                            <th><label for="lot_region">Lot Region</label></th>
							<td><select id="lot_region" name="lot_region" value="{{this.lot_region}}">
								<option value="Region I">Region I (Ilocos Region)</option>
								<option value="Region II">Region II (Cagayan Valley)</option>
								<option value="Region III">Region III (Central Luzon)</option>
								<option value="Region IV">Region IV-A (CALABARZON)</option>
								<option value="Region V">Region V (Bicol Region)</option>
								<option value="Region VI">Region VI (Western Visayas)</option>
								<option value="Region VII">Region VII (Central Visayas)</option>
								<option value="Region VIII">Region VIII (Eastern Visayas)</option>
								<option value="Region IX">Region IX (Zamboanga Peninsula)</option>
								<option value="Region X">Region X (Northern Mindanao)</option>
								<option value="Region XI">Region XI (Davao Region)</option>
								<option value="Region XII">Region XII (SOCCSKSARGEN)</option>
								<option value="NCR">NCR (National Capital Region)</option>
								<option value="CAR">CAR (Cordillera Administrative Region)</option>
								<option value="ARMM">ARMM (Autonomous Region in Muslim Mindanao Region)</option>
								<option value="RXIII">Region XIII (Caraga)</option>
								<option value="MIMAROPA">MIMAROPA</option>
							</select></td>

							<th><label for="zonal">Zonal Value</label></th>
                            <td><input name="zonal" type="number" value="{{this.zonal}}"></td>
                        </tr>
                    </table>
                  </div>
              <div id="main-table-bottom">
                </div>
					<!-- /admin-save-ass will make the assigned_to back to "" and update all the details TODO -->
					<button type = "submit" name="save_ass" formaction="/save-ass">Save Details</button>
				</div>
              </form>
          </div>
      </div>
  </body>
  </html>
